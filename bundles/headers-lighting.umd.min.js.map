{"version":3,"file":"headers-lighting.umd.min.js","sources":["../../src/modules/headers-lighting.directive.ts","../../src/modules/headers-lighting.ts"],"sourcesContent":["import { Directive, ElementRef, AfterViewChecked, AfterViewInit, OnDestroy } from '@angular/core';\n\n@Directive({\n  selector: '[headersLighting]'\n})\n\nexport class HeadersLightingDirective implements AfterViewChecked, AfterViewInit, OnDestroy {\n  private tds = [];\n  private listeners = new Map();\n\n  constructor(private elementRef: ElementRef) { }\n\n  onMouseOver() {\n    const table = this.elementRef.nativeElement;\n\n    return function onMouseOver(event) {\n      const cellIndex = event.target.cellIndex + 1;\n\n      if (!cellIndex || event.target === 'tr') {\n        return;\n      }\n\n      const targetCell = table.querySelector('thead tr:not([disabled]) th:nth-child(' + cellIndex + ')');\n      targetCell.classList.add('header-light');\n    };\n  }\n\n  onMouseOut() {\n    const table = this.elementRef.nativeElement;\n\n    return function onMouseOut(event) {\n      const cellIndex = event.target.cellIndex + 1;\n\n      if (!cellIndex) {\n        return;\n      }\n\n      const targetCell = table.querySelector('thead tr:not([disabled]) th:nth-child(' + cellIndex + ')');\n      targetCell.classList.remove('header-light');\n    };\n  }\n\n  ngAfterViewInit() {\n    const tbody = this.elementRef.nativeElement.querySelector('tbody');\n    this.tds = tbody.querySelectorAll('td:not([disabled])');\n\n    if (this.tds.length) {\n      this.deployListeners();\n    }\n  }\n\n  ngAfterViewChecked() {\n    const tbody = this.elementRef.nativeElement.querySelector('tbody');\n    const newTds = tbody.querySelectorAll('td:not([disabled])');\n\n    if (newTds.length !== this.tds.length) {\n      this.tds = newTds;\n      this.deployListeners();\n    }\n  }\n\n  deployListeners() {\n    this.destroyListeners();\n    this.initListeners();\n  }\n\n  initListeners() {\n    this.tds.forEach((td, i) => {\n      if (this.listeners.has(td)) {\n        const listener = this.listeners.get(td);\n        listener.index = i;\n        return;\n      }\n\n      this.listeners.set(td, {\n        mouseover: this.onMouseOver(),\n        mouseout: this.onMouseOut()\n      });\n\n      const listeners = this.listeners.get(td);\n      td.addEventListener('mouseover', listeners.mouseover);\n      td.addEventListener('mouseout', listeners.mouseout);\n    });\n  }\n\n  destroyListeners() {\n    this.listeners.forEach((a) => {\n      if (!this.listeners.has(a)) {\n        return;\n      }\n\n      const listeners = this.listeners.get(a);\n      a.removeEventListener('mouseover', listeners.mouseover);\n      a.removeEventListener('mouseout', listeners.mouseout);\n      this.listeners.delete(a);\n    });\n  }\n\n  ngOnDestroy() {\n    this.destroyListeners();\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { HeadersLightingDirective } from './headers-lighting.directive';\n\n@NgModule({\n  declarations: [HeadersLightingDirective],\n  exports: [HeadersLightingDirective],\n  imports: [],\n  providers: []\n})\nexport class HeadersLightingModule { }\n"],"names":["HeadersLightingDirective","elementRef","this","tds","listeners","Map","prototype","onMouseOver","table","nativeElement","event","cellIndex","target","querySelector","classList","add","onMouseOut","remove","ngAfterViewInit","tbody","querySelectorAll","length","deployListeners","ngAfterViewChecked","newTds","destroyListeners","initListeners","_this","forEach","td","i","has","get","index","set","mouseover","mouseout","addEventListener","a","removeEventListener","delete","ngOnDestroy","type","Directive","args","selector","ElementRef","HeadersLightingModule","NgModule","declarations","exports","imports","providers"],"mappings":"uWAAA,IAAAA,0BAAA,WAUE,QAAFA,0BAAsBC,YAAAC,KAAtBD,WAAsBA,WAHZC,KAAVC,OACUD,KAAVE,UAAsB,GAAIC,WAIxBL,0BAAFM,UAAAC,YAAE,WACF,GAAUC,OAAQN,KAAKD,WAAWQ,aAE9B,OAAJ,UAAgCC,OAChC,GAAYC,WAAYD,MAAME,OAAOD,UAAY,CAE3C,IAAKA,WAA8B,OAAjBD,MAAME,OAAxB,CAImBJ,MAAMK,cAAc,yCAA2CF,UAAY,KACnFG,UAAUC,IAAI,mBAI7Bf,yBAAFM,UAAAU,WAAE,WACF,GAAUR,OAAQN,KAAKD,WAAWQ,aAE9B,OAAJ,UAA+BC,OAC/B,GAAYC,WAAYD,MAAME,OAAOD,UAAY,CAE3C,IAAKA,UAAL,CAImBH,MAAMK,cAAc,yCAA2CF,UAAY,KACnFG,UAAUG,OAAO,mBAIhCjB,yBAAFM,UAAAY,gBAAE,WACF,GAAUC,OAAQjB,KAAKD,WAAWQ,cAAcI,cAAc,QAC1DX,MAAKC,IAAMgB,MAAMC,iBAAiB,sBAE9BlB,KAAKC,IAAIkB,QACXnB,KAAKoB,mBAITtB,yBAAFM,UAAAiB,mBAAE,WACF,GAAUJ,OAAQjB,KAAKD,WAAWQ,cAAcI,cAAc,SACpDW,OAASL,MAAMC,iBAAiB,qBAElCI,QAAOH,SAAWnB,KAAKC,IAAIkB,SAC7BnB,KAAKC,IAAMqB,OACXtB,KAAKoB,oBAITtB,yBAAFM,UAAAgB,gBAAE,WACEpB,KAAKuB,mBACLvB,KAAKwB,iBAGP1B,yBAAFM,UAAAoB,cAAE,WAAA,GAAFC,OAAAzB,IACIA,MAAKC,IAAIyB,QAAb,SAAsBC,GAAIC,GACpB,GAAIH,MAAKvB,UAAU2B,IAAIF,IAAK,CAG1B,YAFiBF,MAAKvB,UAAU4B,IAAIH,IAC3BI,MAAQH,GAInBH,MAAKvB,UAAU8B,IAAIL,IACjBM,UAAWR,MAAKpB,cAChB6B,SAAUT,MAAKX,cAGvB,IAAYZ,WAAYuB,MAAKvB,UAAU4B,IAAIH,GACrCA,IAAGQ,iBAAiB,YAAajC,UAAU+B,WAC3CN,GAAGQ,iBAAiB,WAAYjC,UAAUgC,aAI9CpC,yBAAFM,UAAAmB,iBAAE,WAAA,GAAFE,OAAAzB,IACIA,MAAKE,UAAUwB,QAAnB,SAA4BU,GACtB,GAAKX,MAAKvB,UAAU2B,IAAIO,GAAxB,CAIN,GAAYlC,WAAYuB,MAAKvB,UAAU4B,IAAIM,EACrCA,GAAEC,oBAAoB,YAAanC,UAAU+B,WAC7CG,EAAEC,oBAAoB,WAAYnC,UAAUgC,UAC5CT,MAAKvB,UAAUoC,OAAOF,OAI1BtC,yBAAFM,UAAAmC,YAAE,WACEvC,KAAKuB,sFAjGTiB,KAACC,cAADA,UAAAC,OACEC,SAAU,mFAHZH,KAAoBI,cAApBA,aCAA,IAAAC,uBAAA,WAAA,QAAAA,6FAIAL,KAACM,cAADA,SAAAJ,OACEK,cAAejD,0BACfkD,SAAUlD,0BACVmD,WACAC"}